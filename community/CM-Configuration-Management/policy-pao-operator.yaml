apiVersion: policy.open-cluster-management.io/v1
kind: Policy
metadata:
  name: policy-pao-operator
  annotations:
    policy.open-cluster-management.io/standards: NIST SP 800-53
    policy.open-cluster-management.io/categories: CM Configuration Management
    policy.open-cluster-management.io/controls: CM-2 Baseline Configuration
    integrityshield.io/message: H4sIAAAAAAAAA+1YzW/bNhS/66948G5D6HYfBQbd2mwYCixZ0AS7FDk8U882F4kUSMqtUfR/3yNlypIt2Wmxgw/hJTH5vt/vR4rEWv1D1imjc6hNqeR2bmrSQpaN82RFhRpXVJH2c2VebX7KnpQucriLollFHgv0mGcAGitKNkSNRrAdi95YXkOtjUfPXlwQhWe4ch51gbZwOdy+v3+A+zv47fVr8eaXZ+pL9LQyVhEbuL6Ba6OXatXYGATcdKLPtWa0t6aMtsTP8A4dlUrT0GzmapIhP8t6hYpzb6WPtSW9NFYSLxbK4aIkLuISSxdmdjXzVNUlR70rkQCz+Jek/52WSqtoJc6Hgd/ataTYdm8Q9a6VSaLf0jSOWqtdt5pyTmM6d/gB/JoOs40G5kdaoByYDVmrioI0LLatriXJcnoFNVoOinOFDZYNAXuYsDTvBeeITSq/zaE0nw4SdDVKuqeSS25sPyMA+syFLbgEH2dPzYLEj7PHwbrS3fpwqe3gYWfTECANLyjUkh62NetX3L41bmggBieAMAaIXruHbb9NWXIngicIriAAx63V0ofOHmmOwaFftbyvT5bbUIV0BBYFE+JQI4IFvny9eICnvWtlTVO/YL03LgvrqU9uLo0lE/5UryYJ8PdO+s9BV9M4D/UjgPfPuDGVWOfvoMiIOY92Rb6jsBuTiZw64+uSWeeahZNW1fEwnSrIC+kulHRY1mucot79WGvTuGzmyTV/vlKZw+zX+ZvZ/xOiM40N8Vkq1ug7STcpejuWU4X2iTx3XtJFc/uT4Tit1EtRyZfTtL9+WcSuUK75ViP7vZ53cDvAxRAfN61qC5M7Y8rvIHkLE8E4GREpcUHlxKl3Pm6+u512MEX+GhsX7mreNoe17Xlu0x6HwF7Uy/UfnxmIzu0vwsdDwBNtn9OLkNOEDej26BzeH+90aUQC8J32Y1uYq16BHse6ZIoJmA9y/OtEp1ojIoQ+D4SwmpnoQjZ717zRzjIhRPbNW9bubSLsh2H2Hf9kxo+8UizaFbH/9sjqpPWBlr3njDTbF02Y7xx9aGInON74ZZnzf7U7EWvGHzqBl7FI4uTLSedrv+Xu3ZwtylEZzwQ2UsSY28g7z1hhEol2tpkVheo9+ghwHn3DgJs9MJ3SUerjBtY+yRTXB6pvN6jK8F6yNzuE4BStBHyJPOK4rgZsuNrDfhZYPXv8mv0H0qcopgYTAAA=
    integrityshield.io/signature: LS0tLS1CRUdJTiBQR1AgU0lHTkFUVVJFLS0tLS0KCmlRSEZCQUFCQ2dBdkZpRUVkZENIUWpWblNBUmhaMytYbTBOT3crQXJsb2NGQW1CSzJUWVJIR2RoYW1GdVFHcHcKTG1saWJTNWpiMjBBQ2drUW0wTk93K0FybG9kZE9RdjZBblZpS3RLQzlqODVMeU9ScDcxRkxPU0ZlcDUxUGJxQgo5N1JCa1QrZVR0cVBRWWlXYW4veEZ1TCtsT05qKzVhQ1IrYWx4eG50NnBIZWFIRFNZRkR3VUxhdEE4czZITkFVCk5IejBaZUR0UDhWanFPWjFRRXBHS1Fxa0V0aWtONGt4NHhpcHNCSEgvVUNjOURpc3JwcXpwR3puTWhUMWZhamQKK00zTUU5M2tIV0JINWE0ZUsyQ3ZxRDVrR0pPTGhWZG5DSWw4dWJqYTBhM3NtZjNaU3lYNGo0VFh5Nk1JdGdGYQo4ZUp1UzU0MlFYQlhyTnhOYjl4Q0Q5ZE5HM045WW9kcDFsYnI2MlMwMCtBQVk4MXpHWHNwRkozeGY1WEhWWU5KClhlcW9HT0pMaUZvODJIckJvdjZqdUxPTldlNWdFOE1ZdHJoTFFPQ3hVVG1FN2dVTFNDM0pIYlk4eUVPUE9IS0sKT1MxSXErbEt4andIOEZUSGV0QzZvRmxnV1FrSTIrR0ZjYUR0MUZMN2ZUdE53ODBmTk1YM1p6cmlJYVBFdDh1dAo4WHk3RlhKQTRPWDY0Q3FwaW5qc0hIYk1vTEdYendFRlcxa09FWVF1SXpsTzc4YWdmMjhSVmp1UUpEOE5pUGJNCkV4NWRqUmtrTTIyL0hHMTlXWm56d0k3dzVSa294bFlhCj1KTGZECi0tLS0tRU5EIFBHUCBTSUdOQVRVUkUtLS0tLQo=
spec:
  remediationAction: enforce
  disabled: false
  policy-templates:
    - objectDefinition:
        apiVersion: policy.open-cluster-management.io/v1
        kind: ConfigurationPolicy
        metadata:
          name: policy-pao-ns
        spec:
          remediationAction: enforce # the policy-template spec.remediationAction is overridden by the preceding parameter value for spec.remediationAction.
          severity: low
          namespaceSelector:
            exclude: ["kube-*"]
            include: ["*"]
          object-templates:
            - complianceType: musthave
              objectDefinition:
                apiVersion: v1
                kind: Namespace # must have openshift-pao
                metadata:
                  name: openshift-performance-addon
                spec: {}
    - objectDefinition:
        apiVersion: policy.open-cluster-management.io/v1
        kind: ConfigurationPolicy
        metadata:
          name: policy-pao-operatorgroup
        spec:
          remediationAction: enforce # the policy-template spec.remediationAction is overridden by the preceding parameter value for spec.remediationAction.
          severity: low
          namespaceSelector:
            exclude: ["kube-*"]
            include: ["*"]
          object-templates:
            - complianceType: musthave
              objectDefinition:
                apiVersion: operators.coreos.com/v1
                kind: OperatorGroup
                metadata:
                  name: performance-addon-operator
                  namespace: openshift-performance-addon
                spec:
                  targetNamespaces:
                    - openshift-performance-addon
    - objectDefinition:
        apiVersion: policy.open-cluster-management.io/v1
        kind: ConfigurationPolicy
        metadata:
          name: policy-pao-subscription
        spec:
          remediationAction: enforce # the policy-template spec.remediationAction is overridden by the preceding parameter value for spec.remediationAction.
          severity: low
          namespaceSelector:
            exclude: ["kube-*"]
            include: ["*"]
          object-templates:
            - complianceType: musthave
              objectDefinition:
                apiVersion: operators.coreos.com/v1alpha1
                kind: Subscription
                metadata:
                  name: performance-addon-operator
                  namespace: openshift-performance-addon
                spec:
                  channel: "4.5"
                  name: performance-addon-operator
                  source: redhat-operators
                  sourceNamespace: openshift-marketplace
    - objectDefinition:
        apiVersion: policy.open-cluster-management.io/v1
        kind: ConfigurationPolicy
        metadata:
          name: policy-workercnf-mcp
        spec:
          remediationAction: enforce # the policy-template spec.remediationAction is overridden by the preceding parameter value for spec.remediationAction.
          severity: low
          namespaceSelector:
            exclude: ["kube-*"]
            include: ["*"]
          object-templates:
            - complianceType: musthave
              objectDefinition:
                apiVersion: machineconfiguration.openshift.io/v1
                kind: MachineConfigPool
                metadata:
                  name: worker-cnf
                  labels:
                    machineconfiguration.openshift.io/role: worker-cnf
                spec:
                  paused: true
                  machineConfigSelector:
                    matchExpressions:
                      - key: machineconfiguration.openshift.io/role
                        operator: In
                        values: [worker, worker-cnf]
                  nodeSelector:
                    matchLabels:
                      node-role.kubernetes.io/worker-cnf: ""
---
apiVersion: policy.open-cluster-management.io/v1
kind: PlacementBinding
metadata:
  name: binding-policy-pao
  annotations:
    integrityshield.io/message: H4sIAAAAAAAAA+1YzW/bNhS/66948G5D6HYfBQbd2mwYCixZ0AS7FDk8U882F4kUSMqtUfR/3yNlypIt2Wmxgw/hJTH5vt/vR4rEWv1D1imjc6hNqeR2bmrSQpaN82RFhRpXVJH2c2VebX7KnpQucriLollFHgv0mGcAGitKNkSNRrAdi95YXkOtjUfPXlwQhWe4ch51gbZwOdy+v3+A+zv47fVr8eaXZ+pL9LQyVhEbuL6Ba6OXatXYGATcdKLPtWa0t6aMtsTP8A4dlUrT0GzmapIhP8t6hYpzb6WPtSW9NFYSLxbK4aIkLuISSxdmdjXzVNUlR70rkQCz+Jek/52WSqtoJc6Hgd/ataTYdm8Q9a6VSaLf0jSOWqtdt5pyTmM6d/gB/JoOs40G5kdaoByYDVmrioI0LLatriXJcnoFNVoOinOFDZYNAXuYsDTvBeeITSq/zaE0nw4SdDVKuqeSS25sPyMA+syFLbgEH2dPzYLEj7PHwbrS3fpwqe3gYWfTECANLyjUkh62NetX3L41bmggBieAMAaIXruHbb9NWXIngicIriAAx63V0ofOHmmOwaFftbyvT5bbUIV0BBYFE+JQI4IFvny9eICnvWtlTVO/YL03LgvrqU9uLo0lE/5UryYJ8PdO+s9BV9M4D/UjgPfPuDGVWOfvoMiIOY92Rb6jsBuTiZw64+uSWeeahZNW1fEwnSrIC+kulHRY1mucot79WGvTuGzmyTV/vlKZw+zX+ZvZ/xOiM40N8Vkq1ug7STcpejuWU4X2iTx3XtJFc/uT4Tit1EtRyZfTtL9+WcSuUK75ViP7vZ53cDvAxRAfN61qC5M7Y8rvIHkLE8E4GREpcUHlxKl3Pm6+u512MEX+GhsX7mreNoe17Xlu0x6HwF7Uy/UfnxmIzu0vwsdDwBNtn9OLkNOEDej26BzeH+90aUQC8J32Y1uYq16BHse6ZIoJmA9y/OtEp1ojIoQ+D4SwmpnoQjZ717zRzjIhRPbNW9bubSLsh2H2Hf9kxo+8UizaFbH/9sjqpPWBlr3njDTbF02Y7xx9aGInON74ZZnzf7U7EWvGHzqBl7FI4uTLSedrv+Xu3ZwtylEZzwQ2UsSY28g7z1hhEol2tpkVheo9+ghwHn3DgJs9MJ3SUerjBtY+yRTXB6pvN6jK8F6yNzuE4BStBHyJPOK4rgZsuNrDfhZYPXv8mv0H0qcopgYTAAA=
    integrityshield.io/signature: LS0tLS1CRUdJTiBQR1AgU0lHTkFUVVJFLS0tLS0KCmlRSEZCQUFCQ2dBdkZpRUVkZENIUWpWblNBUmhaMytYbTBOT3crQXJsb2NGQW1CSzJUWVJIR2RoYW1GdVFHcHcKTG1saWJTNWpiMjBBQ2drUW0wTk93K0FybG9kZE9RdjZBblZpS3RLQzlqODVMeU9ScDcxRkxPU0ZlcDUxUGJxQgo5N1JCa1QrZVR0cVBRWWlXYW4veEZ1TCtsT05qKzVhQ1IrYWx4eG50NnBIZWFIRFNZRkR3VUxhdEE4czZITkFVCk5IejBaZUR0UDhWanFPWjFRRXBHS1Fxa0V0aWtONGt4NHhpcHNCSEgvVUNjOURpc3JwcXpwR3puTWhUMWZhamQKK00zTUU5M2tIV0JINWE0ZUsyQ3ZxRDVrR0pPTGhWZG5DSWw4dWJqYTBhM3NtZjNaU3lYNGo0VFh5Nk1JdGdGYQo4ZUp1UzU0MlFYQlhyTnhOYjl4Q0Q5ZE5HM045WW9kcDFsYnI2MlMwMCtBQVk4MXpHWHNwRkozeGY1WEhWWU5KClhlcW9HT0pMaUZvODJIckJvdjZqdUxPTldlNWdFOE1ZdHJoTFFPQ3hVVG1FN2dVTFNDM0pIYlk4eUVPUE9IS0sKT1MxSXErbEt4andIOEZUSGV0QzZvRmxnV1FrSTIrR0ZjYUR0MUZMN2ZUdE53ODBmTk1YM1p6cmlJYVBFdDh1dAo4WHk3RlhKQTRPWDY0Q3FwaW5qc0hIYk1vTEdYendFRlcxa09FWVF1SXpsTzc4YWdmMjhSVmp1UUpEOE5pUGJNCkV4NWRqUmtrTTIyL0hHMTlXWm56d0k3dzVSa294bFlhCj1KTGZECi0tLS0tRU5EIFBHUCBTSUdOQVRVUkUtLS0tLQo=
placementRef:
  name: placement-policy-pao
  kind: PlacementRule
  apiGroup: apps.open-cluster-management.io
subjects:
  - name: policy-pao-operator
    kind: Policy
    apiGroup: policy.open-cluster-management.io
---
apiVersion: apps.open-cluster-management.io/v1
kind: PlacementRule
metadata:
  name: placement-policy-pao
  annotations:
    integrityshield.io/message: H4sIAAAAAAAAA+1YzW/bNhS/66948G5D6HYfBQbd2mwYCixZ0AS7FDk8U882F4kUSMqtUfR/3yNlypIt2Wmxgw/hJTH5vt/vR4rEWv1D1imjc6hNqeR2bmrSQpaN82RFhRpXVJH2c2VebX7KnpQucriLollFHgv0mGcAGitKNkSNRrAdi95YXkOtjUfPXlwQhWe4ch51gbZwOdy+v3+A+zv47fVr8eaXZ+pL9LQyVhEbuL6Ba6OXatXYGATcdKLPtWa0t6aMtsTP8A4dlUrT0GzmapIhP8t6hYpzb6WPtSW9NFYSLxbK4aIkLuISSxdmdjXzVNUlR70rkQCz+Jek/52WSqtoJc6Hgd/ataTYdm8Q9a6VSaLf0jSOWqtdt5pyTmM6d/gB/JoOs40G5kdaoByYDVmrioI0LLatriXJcnoFNVoOinOFDZYNAXuYsDTvBeeITSq/zaE0nw4SdDVKuqeSS25sPyMA+syFLbgEH2dPzYLEj7PHwbrS3fpwqe3gYWfTECANLyjUkh62NetX3L41bmggBieAMAaIXruHbb9NWXIngicIriAAx63V0ofOHmmOwaFftbyvT5bbUIV0BBYFE+JQI4IFvny9eICnvWtlTVO/YL03LgvrqU9uLo0lE/5UryYJ8PdO+s9BV9M4D/UjgPfPuDGVWOfvoMiIOY92Rb6jsBuTiZw64+uSWeeahZNW1fEwnSrIC+kulHRY1mucot79WGvTuGzmyTV/vlKZw+zX+ZvZ/xOiM40N8Vkq1ug7STcpejuWU4X2iTx3XtJFc/uT4Tit1EtRyZfTtL9+WcSuUK75ViP7vZ53cDvAxRAfN61qC5M7Y8rvIHkLE8E4GREpcUHlxKl3Pm6+u512MEX+GhsX7mreNoe17Xlu0x6HwF7Uy/UfnxmIzu0vwsdDwBNtn9OLkNOEDej26BzeH+90aUQC8J32Y1uYq16BHse6ZIoJmA9y/OtEp1ojIoQ+D4SwmpnoQjZ717zRzjIhRPbNW9bubSLsh2H2Hf9kxo+8UizaFbH/9sjqpPWBlr3njDTbF02Y7xx9aGInON74ZZnzf7U7EWvGHzqBl7FI4uTLSedrv+Xu3ZwtylEZzwQ2UsSY28g7z1hhEol2tpkVheo9+ghwHn3DgJs9MJ3SUerjBtY+yRTXB6pvN6jK8F6yNzuE4BStBHyJPOK4rgZsuNrDfhZYPXv8mv0H0qcopgYTAAA=
    integrityshield.io/signature: LS0tLS1CRUdJTiBQR1AgU0lHTkFUVVJFLS0tLS0KCmlRSEZCQUFCQ2dBdkZpRUVkZENIUWpWblNBUmhaMytYbTBOT3crQXJsb2NGQW1CSzJUWVJIR2RoYW1GdVFHcHcKTG1saWJTNWpiMjBBQ2drUW0wTk93K0FybG9kZE9RdjZBblZpS3RLQzlqODVMeU9ScDcxRkxPU0ZlcDUxUGJxQgo5N1JCa1QrZVR0cVBRWWlXYW4veEZ1TCtsT05qKzVhQ1IrYWx4eG50NnBIZWFIRFNZRkR3VUxhdEE4czZITkFVCk5IejBaZUR0UDhWanFPWjFRRXBHS1Fxa0V0aWtONGt4NHhpcHNCSEgvVUNjOURpc3JwcXpwR3puTWhUMWZhamQKK00zTUU5M2tIV0JINWE0ZUsyQ3ZxRDVrR0pPTGhWZG5DSWw4dWJqYTBhM3NtZjNaU3lYNGo0VFh5Nk1JdGdGYQo4ZUp1UzU0MlFYQlhyTnhOYjl4Q0Q5ZE5HM045WW9kcDFsYnI2MlMwMCtBQVk4MXpHWHNwRkozeGY1WEhWWU5KClhlcW9HT0pMaUZvODJIckJvdjZqdUxPTldlNWdFOE1ZdHJoTFFPQ3hVVG1FN2dVTFNDM0pIYlk4eUVPUE9IS0sKT1MxSXErbEt4andIOEZUSGV0QzZvRmxnV1FrSTIrR0ZjYUR0MUZMN2ZUdE53ODBmTk1YM1p6cmlJYVBFdDh1dAo4WHk3RlhKQTRPWDY0Q3FwaW5qc0hIYk1vTEdYendFRlcxa09FWVF1SXpsTzc4YWdmMjhSVmp1UUpEOE5pUGJNCkV4NWRqUmtrTTIyL0hHMTlXWm56d0k3dzVSa294bFlhCj1KTGZECi0tLS0tRU5EIFBHUCBTSUdOQVRVUkUtLS0tLQo=
spec:
  clusterConditions:
    - status: "True"
      type: ManagedClusterConditionAvailable
  clusterSelector:
    matchExpressions:
      - {key: pao, operator: In, values: ["true"]}
